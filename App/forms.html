<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Congress Members CRUD</title>
</head>
<body>
    <h1>Congress Members CRUD</h1>

    <!-- Form to insert a new Congress member -->
    <h2>Add New Congress Member</h2>
    <form action="/add-congress-member" method="POST" id="add-member-form">
        <label for="memberid">Member ID:</label>
        <input type="text" id="memberid" name="memberid" required><br>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br>
        <label for="party">Party:</label>
        <input type="text" id="party" name="party" required><br>
        <label for="state">State:</label>
        <input type="text" id="state" name="state" required><br>
        <button type="submit">Add Member</button>
    </form>

    <!-- Form to search for a specific Congress member -->
    <h2>Search Congress Member</h2>
    <form id="search-member-form">
        <label for="search_name">Search by Name:</label>
        <input type="text" id="search_name" name="search_name">
        <button type="submit">Search</button>
    </form>


    <!-- Display area for search results -->
    <section id="results-section">
        <!-- Results will be displayed here -->
    </section>

    <script>
        document.getElementById('search-member-form').addEventListener('submit', (event) => {
            event.preventDefault();
            const name = document.getElementById('search_name').value;
            console.log('in html js script got name: ', name);
            fetch('/search-congress-member', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name })
            })
            .then(response => response.json())
            .then(data => {
                // Update HTML with search results
                console.log("resultss: ", data);
                // const resultsDiv = document.getElementById('results-section');
                // resultsDiv.innerHTML = '';
                // data.forEach(member => {
                //     const memberDiv = document.createElement('div');
                //     memberDiv.textContent = `ID: ${member.MEMBERID}, Name: ${member.NAME}, Party: ${member.PARTY}, State: ${member.STATE}`;
                //     resultsDiv.appendChild(memberDiv);
                // });






                // Clear previous results
                const resultsSection = document.getElementById("results-section");
                resultsSection.innerHTML = "";

                // Create table element
                const table = document.createElement("table");
                table.classList.add("bill-table");

                // Create table header row
                const headerRow = document.createElement("tr");
                const headers = ["Congress ID", "Name", "Party", "State"];
                headers.forEach(headerText => {
                    const th = document.createElement("th");
                    th.textContent = headerText;
                    headerRow.appendChild(th);
                });
                table.appendChild(headerRow);

                // Create table body rows with sample bills data
                data.forEach(member => {
                    const row = document.createElement("tr");
                    Object.values(member).forEach(value => {
                        const cell = document.createElement("td");
                        cell.textContent = value;
                        row.appendChild(cell);
                    });
                    table.appendChild(row);
                });

                // Append table to results section
                resultsSection.appendChild(table);
                
            })
            .catch(error => console.error('Error:', error));
        });
    </script>

    <!-- Form to delete a Congress member by ID -->
    <h2>Delete Congress Member</h2>
    <form  action="/delete-congress-member" method="POST" id="delete-member-form">
        <label for="id">Enter ID of member to update:</label>
        <input type="text" id="id" name="id" required><br>
        <button type="submit">Delete Member</button>
    </form>

    <!-- Form to update a Congress member by ID -->
    <h2>Update Congress Member</h2>
    <form id="update-member-form" action="/update-congress-member" method="POST">
        <label for="id">Enter ID of member to update:</label>
        <input type="text" id="id" name="id" required><br>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name"><br>
        <label for="party">Party:</label>
        <input type="text" id="party" name="party"><br>
        <label for="state">State:</label>
        <input type="text" id="state" name="state"><br>
        <button type="submit">Update Member</button>
    </form>


    <!-- Display area for CRUD operation status messages -->
    <div id="status-messages"></div>

    <!-- JavaScript to handle form submissions and AJAX requests
    <script src="scripts.js"></script> -->
</body>
</html>
